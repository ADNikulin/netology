# 18.1 Виртуализация и контейнеризация.  Никулин Александр
# Домашнее задание к занятию 1.  «Введение в виртуализацию»

#### Это задание для самостоятельной отработки навыков и не предполагает обратной связи от преподавателя. Его выполнение не влияет на завершение модуля. Но мы рекомендуем его выполнить, чтобы закрепить полученные знания.  Все вопросы, возникающие в процессе выполнения заданий, пишите в учебный чат или в раздел "Вопросы по заданиям" в личном кабинете.

### Цели задания
1. Научиться запускать виртуальную машину в Yandex Cloud с минимальным расходом ресурсов.
2. Попрактиковаться в выборе платформы  и системы управления виртуализации для решения требуемых задач.

### Инструкция к выполению

1. Для выполнения задачи 1 ознакомьтесь с [инструкцией](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD) по экономии облачных ресурсов и затем выполните задачу 1 по шагам.
2. Своё решение к задачам 2,3,4 загрузите  в ваш ЛК.
   
## Задача 1

Ознакомьтесь с [инструкцией ](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD) по экономии облачных ресурсов.

1. Создайте через web-интерфейс Yandex Cloud - VPC и виртуальную машину из инструкции конфигурации "эконом-ВМ" с публичным ip-адресом. В пункте "Выбор образа/загрузочного диска" выберите вкладку "Cloud Marketplace" , щелкните "Посмотреть больше", найдите образ "Yandex Cloud Toolbox".
2. Убедитесь, что вы можете подключиться к консоли ВМ через ssh, используя публичный ip-адрес. Убедитесь, что на ВМ установлен Docker с помощью команды ```docker --version```(команду выполните от имени root пользователя) !
3. Узнайте в инструкции Яндекс, какие еще инструменты предустановлены в данном образе.
4. Оставьте ВМ работать, пока она не выключится самостоятельно! Опция "прерываемая" выключит ее не позже чем через 24 часа. 
5. Для наглядности подождите еще 1 сутки.
6. Перейдите по [ссылке ](https://console.cloud.yandex.ru/billing?section=accounts). Выберите свой платежный аккаунт. Перейдите на вкладку детализация (фильтр "По продуктам") и оцените график потребления финансов.
7. Удалите ВМ или пользуйтесь ею при выполнении последующих домашних заданий курса обучения.

<details>
  <summary>Раскрыть решение</summary>

  - ![image](https://github.com/ADNikulin/netology/assets/44374132/000ea356-845f-45c6-88d8-8727c5334b2a)
  - ![image](https://github.com/ADNikulin/netology/assets/44374132/5d543777-bad2-453a-bb33-a9a31d2fb16b)
  - установка докера
    ```bash
    #!/bin/bash

    # Add Docker's official GPG key:
    sudo apt-get update &&
    sudo apt-get install ca-certificates curl gnupg -y &&
    sudo install -m 0755 -d /etc/apt/keyrings &&
    curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg &&
    sudo chmod a+r /etc/apt/keyrings/docker.gpg &&
    
    # Add the repository to Apt sources:
    echo \
      "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
      $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
      sudo tee /etc/apt/sources.list.d/docker.list > /dev/null &&
    sudo apt-get update &&
    sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin &&
    sudo docker run hello-world
    ```
  - ![image](https://github.com/ADNikulin/netology/assets/44374132/de957141-9fb1-44c7-b937-7a8b14dc287b)
  - ![image](https://github.com/ADNikulin/netology/assets/44374132/6cc3cd86-41ca-4d0a-b465-d2fa8f610a40)
  - Ну показывать как она отключиться не буду

</details>

---

## Задача 2

Выберите один из вариантов платформы в зависимости от задачи. Здесь нет однозначно верного ответа так как все зависит от конкретных условий: финансирование, компетенции специалистов, удобство использования, надежность, требования ИБ и законодательства, фазы луны.

Тип платформы:

- физические сервера;
- паравиртуализация;
- виртуализация уровня ОС;

Задачи:

- высоконагруженная база данных MySql, критичная к отказу;
- различные web-приложения;
- Windows-системы для использования бухгалтерским отделом;
- системы, выполняющие высокопроизводительные расчёты на GPU.

Объясните критерии выбора платформы в каждом случае.

<details>
   <summary>Раскрыть решение</summary>

   - высоконагруженная база данных MySql, критичная к отказу;
     > Смотрел бы в сторону виртуализации на уровне ОС, можно было бы создать класстер из несколких виртуальных серверов и управлять ими с помощью гипервизора.\
   - различные web-приложения;
     > Паравиртуализация или Виртуализация на уровне ОС. Особенно если зайти через терраформ, то можно создовать их как код. 
   - Windows-системы для использования бухгалтерским отделом;
     > У меня нет однозначного ответа. Думаю что паравиртуализация или виртуализация на уровне ОС. Да и хоть фищические сервера. Если говорить о физ серверах, \
     > то тут может сыгарть роль того, что доступ туда точно ни кто не получит, кроме того у кого есть доступ на эти сервера. С другой стороны всё равно все данные будут храниться в БД, а БД это отдельный сервис, так что для бухгалтеров на них будет развертка только клиентской части. Так что можно обойтись и разной виртуализацией.
   - системы, выполняющие высокопроизводительные расчёты на GPU.
     > Скорее всего физические сервера, дабы отдать ресурсы машины чисто на расчеты поставленных задач.
</details>

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

<details>
   <summary>Раскрыть решение</summary>

   1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
      > VMWare | XEN
   2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
      > KVM
   3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
      > Hyper-v
   4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
      > VMWare | XEN

</details>

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет?

<details>
   <summary>Раскрыть решение</summary>

   > Гетерогенные виртуальные среды также могут быть неэффективны и сложны в управлении. Многие компании решили реализовывать пошаговую стратегию виртуализации ИТ-инфраструктуры, постепенно внедряя решения от различных производителей. Такой подход подразумевает, что определенные типы устройств выполняют соответственные задачи, и при этом компания зависит от продукции не одного вендора. Учитывая тот факт, что для управления таким «лоскутным одеялом» требуется целый набор специалистов различного профиля, данный способ виртуализации инфраструктуры является дорогостоящим и неэффективным в долгосрочной перспективе, поскольку, по мере развития технологий, компании стремятся обеспечить легкость в управлении, совместимость различных систем и масштабируемость инфраструктуры. \
   > \
   > Я бы выбирал одну систему управления и развивался бы в ней, при чем выбирал бы ту систему, где можно представить инфраструктуру как код, что бы можно было мигрировать на разных вендеров в случае необходимости. 
</details>
