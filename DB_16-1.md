# 16.1. Администрирование баз данных для DevOps-инженеров — Никулин Александр
# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/virt-11/additional).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

<details>
  <summary>Раскрыть решение</summary>

  - электронные чеки в json-виде
    * Думаю для данных целей подойдет Документоориентированное решение. Т.к. мы точно не знаем какие будут позиции в чеки или они могут быть разнородными, а сохранять весь документ с данными с привзякой в чеку, удобнее.
  - склады и автомобильные дороги для логистической компании,
    * Для данной задачи подойдут Графовые БД. Что позволит нам вычислять какие-то оптимальные маршруты между точками.
  - генеалогические деревья,
    * Для данной задачи сетевые БД потому, что у потомка может быть несколько связей с родителями.
  - кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
    * Тут подойдут больше БД по типу ключ-значение. 
  - отношения клиент-покупка для интернет-магазина.
    * Тут наверное всё же по классике, реляционные БД. Здесь будет возможность и вести учет клиентов и товаров и их взаимосвязию. Дабы в таких случаях требуется четкое соовтествие и согласованность данных. 
  
</details>

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

<details>
  <summary>Раскрыть решение</summary>
  
  - данные записываются на все узлы с задержкой до часа (асинхронная запись);
    * По теореме CAP к AP: AP (availability + partition tolerance – consistency) - не гарантирует целостность данных, обеспечивая их доступность и устойчивость к разделению, например, как в распределённых веб-кешах и DNS. Так как данные записываются асинхронно, то возможна ситуация что данные будут не согласованы.
    * По теореме PACELC: Система PA/EL, так как не обеспечивается согласованность данных или PA/EC, если работает один узел.
  - при сетевых сбоях система может разделиться на 2 раздельных кластера;
    * По теореме CAP к CA: CA (availability + consistency – partition tolerance) — когда данные во всех узлах кластера согласованы и доступны, но неустойчивы к разделению.
    * По теореме PACELC:  PA или PC
  - система может не прислать корректный ответ или сбросить соединение.
    * По теореме CAP к CP: CP (consistency + partition tolerance – availability) в каждый момент обеспечивает целостность данных и способна работать в условиях распада в ущерб доступности, не выдавая отклик на запрос. Устойчивость к разделению требует дублирования изменений во всех узлах системы, что реализуется с помощью распределённых пессимистических блокировок для сохранения целостности. Так как система может сбросить ответ, в пользу согласованности данных.
    * По теореме PACELC: PC или EC
  
</details>

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

<details>
  <summary>Раскрыть решение</summary>
  
  > В наше время возможно всё. Но всё же. Классический ответ нет. \
  > Так как Принцип ACID отвечает за полноту действий в БД, за согласованной данных, за то что транзакции друг другу мешать не будут и не повлекут за собой какие либо сбои и то что операция будет записаны. \
  > При этом принцип BASE противоположен ACID, и он ориентирован на производительность систем в угоду полноте данных. \
  > Но в принципе думаю, что в теории возможно такое осуществить если какой то из узлов системы возьмет на себя один из принципов. Допустим выберем БД по принципу BASE, а само приложение возьмет на себя отвественность за ACID.
  
</details>

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

<details>
  <summary>Раскрыть решение</summary>

  Pub/Sub - простыми словами, это механизм публикации сообщений/действий и подписки на эти сообщения/действия, ну а дальше их обработка и какие либо реакции на эти сообщения. \
  В целом думаю данному запросу будет отвечать Redis. В версию Redis 2.0. создатели включили функцию PUBLISH/SUBSCRIBE, которая позволила использовать Redis в качестве брокера сообщений. 

</details>
---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
